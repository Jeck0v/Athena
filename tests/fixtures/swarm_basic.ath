DEPLOYMENT-ID SWARM_BASIC_TEST

ENVIRONMENT SECTION
NETWORK-NAME swarm_network DRIVER OVERLAY ATTACHABLE TRUE

SERVICES SECTION

SERVICE web
IMAGE-ID nginx:alpine
REPLICAS 3
UPDATE-CONFIG PARALLELISM 1 DELAY 10s FAILURE-ACTION ROLLBACK
SWARM-LABELS tier="frontend" environment="production"
END SERVICE

SERVICE api
IMAGE-ID python:3.11
REPLICAS 2
UPDATE-CONFIG PARALLELISM 1 DELAY 15s FAILURE-ACTION PAUSE
SWARM-LABELS tier="backend" environment="production"
DEPENDS-ON database
END SERVICE

SERVICE database
IMAGE-ID postgres:15
REPLICAS 1
SWARM-LABELS tier="data" critical="true"
END SERVICE